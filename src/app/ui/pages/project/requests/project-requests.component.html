<md-sidenav-container>
  <div class="scrollable-content" #scrollableContent (scroll)="checkSubheader($event)">
    <div class="requests-header md-elevation-z1"
         [class.visible]="requestGroups && getAllRequests()?.length !== 0">
      <div class="buttons">
        <button md-button>
          <div class="button-content">
            <md-icon>filter_list</md-icon>
            Filter
          </div>
        </button>

        <button md-button [md-menu-trigger-for]="groupingMenu">
          <div class="button-content">
            <md-icon>view_stream</md-icon>
            Group
          </div>
        </button>

        <button md-button [md-menu-trigger-for]="viewingMenu">
          <div class="button-content">
            <md-icon>remove_red_eye</md-icon>
            View
          </div>
        </button>

        <button md-button [md-menu-trigger-for]="sortingMenu">
          <div class="button-content">
            <md-icon>sort</md-icon>
            Sort
          </div>
        </button>
      </div>
    </div>

    <div *ngIf="getAllRequests()?.length === 0" class="empty-requests">
      <div class="wide">
        <div class="getting-started">
          Getting Started
        </div>
        <div class="instructions">
          Create requests using the inventory panel to the right
        </div>
      </div>
    </div>

    <div class="requests-container">
      <requests-group *ngFor="let requestGroup of requestGroups.get(grouping);
                              trackBy:getRequestGroupKey"
                      [requestGroup]="requestGroup"
                      [sort]="sorting"
                      [requestViewOptions]="requestViewOptions">
      </requests-group>
    </div>
  </div>

  <button md-fab color="accent"
          [class.hide]="sidenav.opened || hasSelectedRequests()"
          (click)="sidenav.open()"><md-icon>add</md-icon></button>

  <md-sidenav #sidenav
              [opened]="!hideInventory()"
              [mode]="hideInventory() ? 'over' : 'side'"
              (close)="inventoryPanel.reset()"
              align="end">
    <inventory-panel #inventoryPanel (closeSidenav)="sidenav.close()">
    </inventory-panel>
  </md-sidenav>
</md-sidenav-container>

<!-- Group Menu -->
<md-menu #groupingMenu="mdMenu">
  <div class="project-requests-menu-title">Group requests by:</div>
  <button class="grouping-option project-requests-option" md-menu-item
          *ngFor="let group of getGroups()"
          [class.selected]="grouping == group"
          (click)="setGroup(group)">
    <md-icon>check</md-icon>
    {{getGroupingName(group)}}
  </button>
</md-menu>

<!-- View Menu -->
<md-menu #viewingMenu="mdMenu">
  <div class="project-requests-menu-title">View request details:</div>
  <button class="project-requests-option" md-menu-item
          *ngFor="let option of getRequestViewOptionKeys()"
          [class.selected]="requestViewOptions[option]"
          (click)="toggleRequestViewOption(option)">
    <md-icon>check</md-icon>
    {{option}}
  </button>
</md-menu>

<!-- Sort Menu -->
<md-menu #sortingMenu="mdMenu" x-position="before">
  <div class="project-requests-menu-title">Sort requests by:</div>
  <button class="project-requests-option" md-menu-item
          *ngFor="let sort of getSortOptions()"
          [class.selected]="sorting == sort"
          (click)="sorting = sort">
    <md-icon>check</md-icon>
    {{sort}}
  </button>
</md-menu>
