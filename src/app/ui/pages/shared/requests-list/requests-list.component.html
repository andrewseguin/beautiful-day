<div class="top-bar-container">
  <div class="top-bar" [style.backgroundColor]="expanded ? 'white' : ''">
    <div class="input-bar">
      <mat-icon class="search-icon">search</mat-icon>
      <input [formControl]="search" placeholder="Search requests">
      <button mat-icon-button
              class="expand"
              (click)="expanded = !expanded">
        <mat-icon [@expansionIndicator]="expanded">expand_more</mat-icon>
      </button>
    </div>

    <div class="details" [@expanded]="expanded">
      <display-options-header *ngIf="!printMode"
                              [class.visible]="requestGroups && requestsCount !== 0"
                              [displayOptions]="displayOptions"
                              (optionsChanged)="updateDisplayOptions($event)">
      </display-options-header>
    </div>
  </div>
</div>


<div class="requests-container">
  <requests-group *ngFor="let requestGroup of requestGroups.get(displayOptions.grouping);
                          trackBy:getRequestGroupKey"
                  [requestGroup]="requestGroup"
                  [canEdit]="editPermissions?.requests && !printMode"
                  [projectId]="projectId"
                  [printMode]="printMode"
                  [sort]="displayOptions.sorting"
                  [reverseSort]="displayOptions.reverseSort"
                  [filter]="displayOptions.filter"
                  [requestViewOptions]="displayOptions.viewing"
                  (filterTag)="setFilter($event)">
  </requests-group>
</div>
