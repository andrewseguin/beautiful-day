<md-toolbar color="primary" class="project-toolbar"
            [class.md-elevation-z1]="!isMobile() && topLevel != 'reporting'">
  <button md-button class="toolbar-menu" (click)="sidenav.open()">
    <md-icon>menu</md-icon>
  </button>

  <div class="name"> {{getTitle()}} </div>

  <project-nav class="main" *ngIf="project" [projectId]="project?.$key"></project-nav>

  <div class="end">
    <button md-button class="user" *ngIf="authState"
            [style.backgroundImage]="'url(' + authState.auth.photoURL + ')'"
            [md-menu-trigger-for]="menu">
      <div class="badge" *ngIf="user && (!user.name || !user.phone)">!</div>
    </button>
  </div>

  <md-menu #menu="mdMenu" x-position="before" class="auth">
    <button md-menu-item class="info first">{{user?.name}}</button>
    <button md-menu-item class="info" *ngIf="user?.phone">{{user?.phone}}</button>
    <button md-menu-item class="info last">{{authState?.auth.email}}</button>

    <button md-menu-item class="option" (click)="editProfile()">
      <div class="edit-warn">
        <md-icon *ngIf="user && !user.phone"
                 mdTooltip="Missing phone number">
          error_outline
        </md-icon>
        Edit Profile
      </div>
    </button>
    <button md-menu-item class="option" (click)="sendFeedback()">Send Feedback</button>
    <button md-menu-item class="option" (click)="reportIssue()">Report Issue</button>
    <button md-menu-item class="option" *ngIf="canManageAdmins" (click)="manageAdmins()">Manage Admins</button>
    <button md-menu-item class="option" *ngIf="canManageAcquisitions" (click)="manageAcquisitions()">Manage Acquisitions Team</button>
    <button md-menu-item class="option" *ngIf="canImportItems" (click)="importItems()">Import Inventory</button>

    <button md-menu-item class="logout" (click)="logout()">Logout</button>
  </md-menu>
</md-toolbar>

<md-toolbar class="sub-header" color="primary"
            *ngIf="project && project.$exists()"
            [@subheader]="subheaderVisibility">
  <project-nav [projectId]="project?.$key"></project-nav>
</md-toolbar>
