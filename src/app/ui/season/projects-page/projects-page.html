<div class="project" *ngFor="let project of projects | async">
  <div class="main">

    <div class="heading">
      <div class="name"> {{project.name}} </div>
      <button mat-stroked-button color="primary"
              (click)="navigateToProject(project.id)">
        Requests
      </button>
    </div>

    <div class="description">
      <div class="label"> Description </div>
      {{project.description}}
    </div>

    <div class="location">
      <div class="label"> Location </div>
      <a href="https://www.google.com/maps/search/?api=1&query={{project.location}}">{{project.location}}</a>
    </div>

    <a *ngIf="project.receiptsFolder && (permissions.isAcquisitions | async)"
       [href]="project.receiptsFolder"
       class="receipts-folder"
       style="display: none"
       target="_blank">
      View Receipts
    </a>
  </div>

  <div class="contacts-trigger label"
       (mouseover)="loadedContacts.add(project.id)"
       (click)="expandedContacts.toggle(project.id)">
    Contacts
    <mat-icon [@expansionIndicator]="expandedContacts.isSelected(project.id)">
      expand_more
    </mat-icon>
  </div>
  <div class="contacts" [@expansionContent]="expandedContacts.isSelected(project.id)">
    <ng-container *ngIf="loadedContacts.has(project.id)">
      <div class="contact-group"> Directors </div>
      <detail-user [userEmail]="email" group="director"
                   *ngFor="let email of project.directors">
      </detail-user>

      <div class="contact-group"> Leads </div>
      <detail-user [userEmail]="email" group="lead"
                   *ngFor="let email of project.leads">
      </detail-user>

      <ng-container *ngIf="project.acquisitions?.length > 0">
        <div class="contact-group"> Acquisitions </div>
        <detail-user [userEmail]="email" group="acquisitions"
                     *ngFor="let email of project.acquisitions">
        </detail-user>
      </ng-container>
    </ng-container>
  </div>
</div>

<loading label="projects" *ngIf="!(projects | async)"></loading>
